\def\TheAcknowledgments{The author would like to thank Jan Wielemaker, the
creator of SWI Prolog, for being very responsive in making enhancements to
and correcting problems in the implementation of delimited continuations 
in SWI Prolog, as well as being very helpful in explaining some of the
internal details of the implementation.}

\def\TheAuthors{Samer Abdallah (\texttt{samer@jukedeck.com})}
\def\TheInstitution{Jukedeck Ltd.}

\def\TheTitle{More declarative tabling in Prolog using multi-prompt delimited control}

\def\TheAbstract{%
Several Prolog implementations include a facility for \emph{tabling}, an alternative
resolution strategy which uses memoisation to avoid redundant duplication of
computations. Until relatively recently, tabling has required either low-level
support in the underlying Prolog engine, or extensive program transormation
\citep{GuzmanCarroHermenegildo2008}.
An alternative approach is to 
augment Prolog with low level support for continuation capturing control operators,
particularly \emph{delimited continuations}, which have been investigated in the 
field of functional programming and found to be capable of supporting a wide variety 
of computational effects within an otherwise declarative language. 

This technical report describes an implementation of tabling in SWI Prolog based
on delimited control operators for Prolog recently introduced by \cite{SchrijversDemoenDesouter2013}.
In comparison with a previous implementation of tabling for SWI Prolog using delimited
control \citep{DesouterVan-DoorenSchrijvers2015}, this approach, based on 
the functional memoising parser combinators of \cite{Johnson1995}, stays closer to
the declarative core of Prolog, requires less code, and is able to deliver solutions
from systems of tabled predicates incrementally (as opposed to finding all solutions
before delivering any to the rest of the program).

A collection of benchmarks shows that a small number of carefully targeted optimisations
yields performance within a factor of about 2 of the optimised version of Desouter 
et al.'s system currently included in SWI Prolog.
}
