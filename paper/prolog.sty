\usepackage{listings}
\definecolor{ListingBar}{rgb}{0.8,0.8,0.8}
\definecolor{ListingBG}{rgb}{0.95,0.95,0.95}
\definecolor{Comment}{rgb}{0.4,0.4,0.4}

% FROM PLP talk
\lstset{%
  language=Prolog,
  columns=fullflexible,
  % basicstyle=\usefont{T1}{cmr}{m}{n},
  basicstyle=\sffamily,
  % keywordstyle=\bfseries\rmfamily,
  keywordstyle=\rmfamily,
  identifierstyle=\itshape, emphstyle=\itshape,
  % identifierstyle=\itshape, emphstyle=\upshape,
  % identifierstyle=\upshape, emphstyle=\itshape,
   commentstyle=\color{Comment}\bfseries,
  emph={X,Y,Z,M,N,N1,N2,I1,I2,P,P1,P2,L},
  morekeywords={table,false,no,yes,ground,module,meta_predicate,pred,type},
  deletekeywords={statistics,length,repeat,pp,is,sh,EM,time,tab,prompt},
  upquote=true,
  literate={==>}{{$\Rightarrow$ }}2
           {S1}{{$S_1$}}2
           {S2}{{$S_2$}}2
           {S3}{{$S_3$}}2
           {<=>}{{$\Leftrightarrow$ }}2
           {->}{{$\rightarrow$ }}2
           {-->}{{$\longrightarrow$ }}3
           {~}{{$\sim$ }}1
           {|}{{$| $}}1
  }


\lstnewenvironment{prolog-barred} {\lstset{%
   basicstyle=\ttfamily\small,
   identifierstyle=\upshape, 
   emphstyle=\mdseries,
   % backgroundcolor=\color{ListingBG},
   commentstyle=\mdseries,
   frame=leftline,
   framerule=0.4em,
   rulecolor=\color{ListingBar},
   framesep=1em,
   framexleftmargin=0em,
   mathescape=true,
   language=prolog,
   columns=spaceflexible,
   % aboveskip=0.75em,
   % belowskip=0.75em,
   xleftmargin=1.2em,
   xrightmargin=1.2em,
   tabsize=2,
   gobble=2
  }} {}

\lstnewenvironment{prolog} {\lstset{%
  mathescape=true,
  language=prolog,
  columns=spaceflexible,
  morekeywords={table,false,no,yes,ground,module,meta_predicate},
	deletekeywords={ground},
  aboveskip=1.00em,
  belowskip=1.00em,
  xleftmargin=1.5em,
  tabsize=2,
  gobble=2
  }} {}

\lstnewenvironment{prolog-framed}[1][name=ad1]{\lstset{%
  mathescape=true,
  language=prolog,
  columns=spaceflexible,
  % basicstyle=\sffamily,
  keywordstyle=\bfseries\rmfamily,
  morekeywords={table,false,no,yes,ground,module,meta_predicate},
  deletekeywords={functor,name,statistics,length,repeat,pp,is,sh,EM,time,tab,prompt,numbervars},
  frame=lines,
  aboveskip=1.0em,
  belowskip=1.0em,
  xleftmargin=0em,
  xrightmargin=0em,
  tabsize=2,
  gobble=2,
  numbers=left,
  firstnumber=auto,
  numberstyle=\small\color{Comment},
  literate={==>}{{$\Rightarrow$ }}2
           {Ys1}{{$\mathit{Ys}_1$}}3
           {Ys2}{{$\mathit{Ys}_2$}}3
           {A1}{{$A_1$}}2
           {A2}{{$A_2$}}2
           {A3}{{$A_3$}}2
           {N1}{{$N_1$}}2
           {N2}{{$N_2$}}2
           {N3}{{$N_3$}}2
           {S1}{{$S_1$}}2
           {S2}{{$S_2$}}2
           {S3}{{$S_3$}}2%
           {&}{{\$}}1%
           {<=>}{{$\Leftrightarrow$}}2%
           {->}{{$\rightarrow$}}2%
           {-->}{{$\longrightarrow$}}3%
           {~}{{$\sim$ }}1%
           {]}{{$\,$]}}1
           {|}{{$\,|$}}3,
  #1
  }} {}

\lstMakeShortInline[language=Prolog,upquote=true,deletekeywords={numbervars,assert,retract,repeat,tab,prompt}]"
